<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OptionsEdge — Sign In</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{--blue:#3B82F6;--blue2:#1D4ED8;--text:#111827;--muted:#6B7280;--line:#E5E7EB;--shadow:0 18px 60px rgba(17,24,39,.12);--r:16px;}
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; color:var(--text);
      background:
        radial-gradient(900px 420px at 18% 8%, rgba(59,130,246,.16), transparent 55%),
        linear-gradient(180deg,#fff 0%, #F7FAFF 100%);
    }
    a{color:inherit;text-decoration:none}
    .wrap{min-height:100%; display:grid; place-items:center; padding:28px;}
    .shell{width:min(1100px,100%); display:grid; grid-template-columns: 1fr 1fr; gap:18px; align-items:stretch;}
    .left{
      border-radius:24px;
      background:linear-gradient(135deg, rgba(59,130,246,.14), rgba(29,78,216,.06));
      border:1px solid rgba(59,130,246,.18);
      padding:28px; position:relative; overflow:hidden;
    }
    .left:before{
      content:""; position:absolute; inset:-120px -120px auto auto;
      width:340px; height:340px;
      background:radial-gradient(circle, rgba(59,130,246,.35), transparent 60%);
      filter:blur(2px);
    }
    .brand{display:flex; align-items:center; gap:12px; font-weight:900; letter-spacing:-0.02em;}
    .logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--blue),var(--blue2));display:grid;place-items:center;color:#fff}
    .left h1{margin:20px 0 10px; font-size:38px; letter-spacing:-0.03em; line-height:1.1; position:relative;}
    .left p{margin:0; color:var(--muted); line-height:1.6; max-width:52ch; position:relative; font-weight:600;}
    .bullets{margin-top:18px; display:grid; gap:12px; position:relative;}
    .b{display:flex; gap:10px; align-items:flex-start; padding:12px; border-radius:14px; background:rgba(255,255,255,.65); border:1px solid rgba(229,231,235,.85);}
    .tick{width:20px;height:20px;border-radius:7px;background:rgba(16,185,129,.14);border:1px solid rgba(16,185,129,.22);display:grid;place-items:center;color:#059669;font-weight:900;font-size:12px;margin-top:1px}
    .b b{display:block; font-weight:900}
    .b small{display:block; margin-top:2px; color:var(--muted); font-weight:650; line-height:1.4}

    .right{
      border-radius:24px;
      background:#fff;
      border:1px solid rgba(229,231,235,.9);
      box-shadow: var(--shadow);
      padding:28px;
    }
    .cardHead{display:flex; align-items:flex-start; justify-content:space-between; gap:12px;}
    .cardHead h2{margin:0; font-size:24px; letter-spacing:-0.02em;}
    .cardHead p{margin:6px 0 0; color:var(--muted); line-height:1.55; font-weight:600;}
    .link{color:var(--blue2); font-weight:800}
    .link:hover{text-decoration:underline}
    form{margin-top:18px; display:grid; gap:14px;}
    label{display:block; font-weight:750; font-size:13px; margin-bottom:6px;}
    .input{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      outline:none;
      font-size:14px;
      background:#fff;
      transition:border .15s ease, box-shadow .15s ease;
    }
    .input:focus{border-color:rgba(59,130,246,.55); box-shadow:0 0 0 4px rgba(59,130,246,.14);}
    .row{display:flex; align-items:flex-start; justify-content:space-between; gap:12px; flex-wrap:wrap;}
    .chk{display:flex; align-items:center; gap:10px; color:var(--muted); font-weight:650; font-size:14px; line-height:1.35;}
    .chk input{width:16px;height:16px; margin:0}
    .btn{
      width:100%;
      display:inline-flex; align-items:center; justify-content:center;
      padding:12px 16px; border-radius:12px;
      font-weight:850; border:1px solid transparent;
      background:linear-gradient(135deg,var(--blue),var(--blue2));
      color:#fff;
      box-shadow:0 14px 34px rgba(59,130,246,.24);
      cursor:pointer;
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .btn:hover{transform:translateY(-1px); box-shadow:0 18px 42px rgba(59,130,246,.28)}
    .btn:disabled{opacity:.65; cursor:not-allowed; transform:none}
    .alert{
      display:none;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(239,68,68,.22);
      background:rgba(239,68,68,.08);
      color:#991B1B;
      font-weight:700;
      line-height:1.45;
      font-size:14px;
    }
    .fine{
      margin-top:10px;
      color:var(--muted);
      font-weight:650;
      font-size:13px;
      line-height:1.6;
    }
    .fine a{color:var(--blue2); font-weight:800}
    .fine a:hover{text-decoration:underline}

    @media (max-width:980px){
      .shell{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="shell">
      <section class="left">
        <a class="brand" href="optionsedge-landing.html">
          <span class="logo">OE</span><span>OptionsEdge</span>
        </a>
        <h1>Welcome back</h1>
        <p>Sign in to access your dashboard, AI trade ideas, paper trading, and performance analytics.</p>
        <div class="bullets">
          <div class="b"><span class="tick">✓</span><div><b>AI trade intelligence</b><small>Signals, reasoning, and volatility context in seconds.</small></div></div>
          <div class="b"><span class="tick">✓</span><div><b>Paper trading included</b><small>Practice with a $100,000 virtual balance.</small></div></div>
          <div class="b"><span class="tick">✓</span><div><b>Track performance</b><small>Journal trades and improve your edge over time.</small></div></div>
        </div>
      </section>

      <section class="right">
        <div class="cardHead">
          <div><h2>Sign in</h2><p>Use your email and password to continue.</p></div>
          <div style="text-align:right"><a class="link" href="optionsedge-register.html">Create account</a></div>
        </div>

        <div id="alert" class="alert"></div>

        <form id="loginForm">
          <div>
            <label for="email">Email</label>
            <input class="input" id="email" name="email" type="email" placeholder="you@company.com" required />
          </div>
          <div>
            <label for="password">Password</label>
            <input class="input" id="password" name="password" type="password" placeholder="••••••••" required />
          </div>

          <div class="row">
            <label class="chk"><input id="remember" type="checkbox" /> Remember me</label>
            <a class="link" href="#" onclick="return false;">Forgot password?</a>
          </div>

          <button id="submitBtn" class="btn" type="submit">Sign In</button>
          <div class="fine">Don't have an account? <a href="optionsedge-register.html">Create one</a>.</div>
        </form>
      </section>
    </div>
  </div>

  <script>
    const API_BASE = "https://web-production-8b7ae.up.railway.app";
    const form = document.getElementById('loginForm');
    const alertEl = document.getElementById('alert');
    const btn = document.getElementById('submitBtn');

    function showError(msg){ alertEl.style.display='block'; alertEl.textContent=msg; }
    function clearError(){ alertEl.style.display='none'; alertEl.textContent=''; }

    form.addEventListener('submit', async (e) => {
      e.preventDefault(); clearError();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;

      btn.disabled = true; btn.textContent="Signing in…";
      try{
        const res = await fetch(`${API_BASE}/api/auth/login`, {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify({ email, password })
        });
        const data = await res.json().catch(()=> ({}));
        if(!res.ok){ showError(data?.message || "Login failed. Please check your credentials."); return; }
        if(data?.access_token) localStorage.setItem("access_token", data.access_token);
        if(data?.refresh_token) localStorage.setItem("refresh_token", data.refresh_token);
        window.location.href="/dashboard";
      } catch(err){
        showError("Network error. Please try again.");
      } finally{
        btn.disabled=false; btn.textContent="Sign In";
      }
    });
  </script>
</body>
</html>
